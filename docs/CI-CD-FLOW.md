# Fluxo de CI/CD - Diagrama Visual

## ğŸ”„ Fluxo Completo

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     DESENVOLVIMENTO                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Criar Feature   â”‚
                    â”‚  Branch          â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Fazer Commits   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Push to GitHub  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â–¼                                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CI Workflow  â”‚                            â”‚   Abrir PR   â”‚
â”‚ (ci.yml)     â”‚                            â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                                           â”‚
        â”‚  â€¢ npm ci                                 â”‚
        â”‚  â€¢ npm test                               â–¼
        â”‚  â€¢ build:dev                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  â€¢ build:prod                     â”‚   Preview    â”‚
        â”‚  â€¢ upload artifacts               â”‚  Workflow    â”‚
        â”‚                                   â”‚ (preview.yml)â”‚
        â–¼                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                   â”‚
â”‚  âœ… Success  â”‚                                   â”‚
â”‚  âŒ Failure  â”‚                                   â”‚  â€¢ Build PR
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                   â”‚  â€¢ Comment PR
                                                   â”‚  â€¢ Upload preview
                                                   â”‚
                                                   â–¼
                                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                           â”‚   Review &   â”‚
                                           â”‚   Approve    â”‚
                                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                   â”‚
                                                   â–¼
                                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                           â”‚  Merge to    â”‚
                                           â”‚     main     â”‚
                                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          RELEASE                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  npm version     â”‚
                    â”‚  (ou git tag)    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Push tag        â”‚
                    â”‚  (v1.0.0)        â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Release         â”‚
                    â”‚  Workflow        â”‚
                    â”‚ (release.yml)    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚  â€¢ Run tests
                              â”‚  â€¢ Build production
                              â”‚  â€¢ Create tarball
                              â”‚  â€¢ Generate changelog
                              â”‚  â€¢ Create GitHub Release
                              â”‚  â€¢ Upload artifacts
                              â”‚  â€¢ (Optional) Deploy
                              â”‚
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  ğŸ“¦ Release      â”‚
                    â”‚     Created      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  ğŸš€ Available    â”‚
                    â”‚  for Download    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“‹ Gatilhos dos Workflows

### CI Workflow (ci.yml)

```
Trigger: push | pull_request
Branches: main, develop

Event Flow:
  push/PR â†’ Install deps â†’ Run tests â†’ Build dev â†’ Build prod â†’ Upload artifacts
```

### Preview Workflow (preview.yml)

```
Trigger: pull_request
Types: opened, synchronize, reopened

Event Flow:
  Open PR â†’ Install deps â†’ Run tests â†’ Build prod â†’ Comment PR â†’ Upload preview
```

### Release Workflow (release.yml)

```
Trigger: push
Tags: v*.*.*

Event Flow:
  Push tag â†’ Test â†’ Build â†’ Package â†’ Changelog â†’ Create Release â†’ Upload
```

## ğŸ¯ DecisÃ£o de Fluxo

```
                    Novo CÃ³digo
                        â”‚
                        â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ Tipo de Change? â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â–¼               â–¼               â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Bug   â”‚     â”‚Feature â”‚     â”‚Hotfix  â”‚
   â”‚  Fix   â”‚     â”‚        â”‚     â”‚        â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚               â”‚               â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ Create Branch   â”‚
              â”‚ feat/*, fix/*   â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  Develop &      â”‚
              â”‚  Commit         â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  Push & Open PR â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ CI + Preview    â”‚
              â”‚ Workflows Run   â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
                â–¼               â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ âœ… Pass â”‚     â”‚ âŒ Fail â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚               â”‚
                â”‚               â–¼
                â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚         â”‚  Fix &  â”‚
                â”‚         â”‚Re-Push  â”‚
                â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚               â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ Code Review     â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ Approve & Merge â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ Ready for       â”‚
              â”‚ Release?        â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
                â–¼               â–¼
              [Yes]           [No]
                â”‚               â”‚
                â”‚               â””â”€â”€â–º Continue Development
                â”‚
                â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ Create Tag      â”‚
      â”‚ (v1.0.0)        â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ Release         â”‚
      â”‚ Workflow        â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ ğŸ“¦ Published    â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”€ EstratÃ©gia de Branching

```
main (produÃ§Ã£o)
  â”‚
  â”œâ”€â”€ v1.0.0 (tag/release)
  â”‚
  â”œâ”€â”€ v1.1.0 (tag/release)
  â”‚
  â””â”€â”€ develop (desenvolvimento)
        â”‚
        â”œâ”€â”€ feat/nova-funcionalidade
        â”‚
        â”œâ”€â”€ fix/correcao-bug
        â”‚
        â””â”€â”€ refactor/melhoria-codigo
```

## âš™ï¸ Jobs e Steps

### CI Workflow

```
Job: build-and-test
  â”œâ”€â”€ Checkout code
  â”œâ”€â”€ Setup Node.js (20.x, 22.x)
  â”œâ”€â”€ Install dependencies
  â”œâ”€â”€ Lint check
  â”œâ”€â”€ Run tests
  â”œâ”€â”€ Build development
  â”œâ”€â”€ Build production
  â””â”€â”€ Upload artifacts

Job: code-coverage
  â”œâ”€â”€ Checkout code
  â”œâ”€â”€ Setup Node.js
  â”œâ”€â”€ Install dependencies
  â”œâ”€â”€ Run tests with coverage
  â””â”€â”€ Upload coverage reports
```

### Release Workflow

```
Job: create-release
  â”œâ”€â”€ Checkout code
  â”œâ”€â”€ Setup Node.js
  â”œâ”€â”€ Install dependencies
  â”œâ”€â”€ Run tests
  â”œâ”€â”€ Build production
  â”œâ”€â”€ Create tarball
  â”œâ”€â”€ Generate changelog
  â”œâ”€â”€ Create GitHub Release
  â””â”€â”€ Upload artifacts

Job: deploy-to-pages (optional)
  â”œâ”€â”€ Checkout code
  â”œâ”€â”€ Setup Node.js
  â”œâ”€â”€ Install dependencies
  â”œâ”€â”€ Build production
  â””â”€â”€ Deploy to GitHub Pages
```

### Preview Workflow

```
Job: pr-preview
  â”œâ”€â”€ Checkout code
  â”œâ”€â”€ Setup Node.js
  â”œâ”€â”€ Install dependencies
  â”œâ”€â”€ Run tests
  â”œâ”€â”€ Build production
  â”œâ”€â”€ Comment PR with status
  â””â”€â”€ Upload preview build
```

## ğŸ“Š Matriz de ExecuÃ§Ã£o

| Evento       | Workflow     | Node.js | Testes | Build Dev | Build Prod | Artefatos |
| ------------ | ------------ | ------- | ------ | --------- | ---------- | --------- |
| Push main    | CI           | 20, 22  | âœ…     | âœ…        | âœ…         | 7 dias    |
| Push develop | CI           | 20, 22  | âœ…     | âœ…        | âœ…         | 7 dias    |
| Open PR      | CI + Preview | 20, 22  | âœ…     | âœ…        | âœ…         | 5 dias    |
| Push tag     | Release      | 20      | âœ…     | âŒ        | âœ…         | 90 dias   |

## ğŸ¨ Estados do Workflow

```
â³ Queued    â†’ Workflow aguardando execuÃ§Ã£o
ğŸ”„ Running   â†’ Workflow em execuÃ§Ã£o
âœ… Success   â†’ Workflow concluÃ­do com sucesso
âŒ Failure   â†’ Workflow falhou
âš ï¸  Cancelled â†’ Workflow cancelado pelo usuÃ¡rio
â­ï¸  Skipped   â†’ Job pulado por condiÃ§Ã£o
```

## ğŸ” PermissÃµes NecessÃ¡rias

```
GITHUB_TOKEN Permissions:
  â”œâ”€â”€ contents: write       (para criar releases)
  â”œâ”€â”€ pull-requests: write  (para comentar em PRs)
  â”œâ”€â”€ issues: write         (para gerenciar issues)
  â””â”€â”€ pages: write          (para deploy GitHub Pages)
```

## ğŸ“ˆ MÃ©tricas e Monitoramento

```
VisualizaÃ§Ã£o de Status:
  â”‚
  â”œâ”€â”€ README Badges
  â”‚   â”œâ”€â”€ CI Status
  â”‚   â””â”€â”€ Release Status
  â”‚
  â”œâ”€â”€ GitHub Actions Tab
  â”‚   â”œâ”€â”€ Workflow Runs
  â”‚   â”œâ”€â”€ Job Logs
  â”‚   â””â”€â”€ Artifacts
  â”‚
  â””â”€â”€ GitHub Releases
      â”œâ”€â”€ Release Notes
      â”œâ”€â”€ Download Stats
      â””â”€â”€ Assets
```

---

Este diagrama fornece uma visÃ£o visual completa do fluxo de CI/CD implementado no projeto.
